<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">
   <select id="selectUserIdPwd" parameterType="uservo" resultType="userdto">
	<![CDATA[
		select id, user_type
		from tb_user
		where id=#{id} and password=#{password}
	]]>
	</select>
	
	<select id="selectLoginUser" resultType="userdto">
	<![CDATA[
		select tu.*, td.dept_name
		from tb_user tu, tb_department td 
		where id=#{id} and password=#{password}
		and td.dept_code = tu.dept_code
	]]>
	</select>
	
	<select id="selectById" parameterType="String" resultType="uservo">
	<![CDATA[
		select *
		from tb_user
		where id=#{id}
	]]>
	</select>

	<select id="selectDeptName" parameterType="string">
	<![CDATA[
	]]>]
	</select>
	
	<select id="selectId" parameterType="string" resultType="string">
	<![CDATA[
		select password
		from tb_user
		where id=#{id}
	]]>
	</select>	

	<select id="selectDeptList" resultType="deptdto">
	<![CDATA[
		select row_number () over (order by dept_code) as id, * 
		from tb_department order by dept_code;
	]]>
	</select>

<<<<<<< HEAD
	<select id="selectUserList" resultType="userdto">
	<![CDATA[
		select tu.id, tu.name, tu.phone, tu.email, tu.rank, tu.img_code, td.dept_name
		from tb_user tu, tb_department td 
		where td.dept_code = tu.dept_code
	]]>
		<choose>
			<when test="deptList.length != 0">
				and tu.dept_code in
				<foreach collection="deptList" item="item" index="index" separator="," open="(" close=")">
					#{item}
				</foreach>
			</when>
			<otherwise>
				and tu.user_type = 's'
			</otherwise>
		</choose>        
=======
   <select id="selectUserIdPwd" parameterType="uservo" resultType="userdto">
		<![CDATA[
			select id, user_type
			from tb_user
			where id=#{id} and password=#{password}
		]]>
	</select>

	<select id="selectLoginUser" parameterType="uservo" resultType="uservo">
		<![CDATA[
			select *
			from tb_user
			where id=#{id} and password=#{password}
		]]>
>>>>>>> baesohyun
	</select>
   
</mapper>